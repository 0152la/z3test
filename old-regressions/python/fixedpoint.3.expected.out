(declare-rel state (L Int L Int))
(declare-rel step (L Int L Int L Int L Int))
(declare-var A L)
(declare-var B Int)
(declare-var C L)
(declare-var D Int)
(declare-var E L)
(declare-var F Int)
(declare-var G L)
(declare-var H Int)
(rule (=> (and (= C L0) (= B 0) (= A L0) (= D 0)) (state A B C D)))
(rule (=> (and (step A B C D E F G H) (state A B C D)) (state E F G H)))
(rule (=> (and (= F (+ 1 D)) (= A L0)) (step A B C D L1 F C D)))
(rule (=> (and (= A L1) (or (<= B D) (= D 0))) (step A B C D L2 B C D)))
(rule (=> (= A L2) (step A B C D L0 0 C D)))
(rule (=> (and (= F (+ 1 B)) (= C L0)) (step A B C D A B L1 F)))
(rule (=> (and (= C L1) (or (<= D B) (= B 0))) (step A B C D A B L2 D)))
(rule (=> (= C L2) (step A B C D A B L0 0)))

And(state(Var(0), Var(1), Var(2), Var(3)),
    And(Var(0) == L2, Var(2) == L2))
unsat
And(ForAll([A, B, C, D],
           state(A, B, C, D) ==
           And(Or(Not(A == L1),
                  B <= 1,
                  D >= 3,
                  -1*B + D <= -1,
                  Not(C == L0) == (A == L0)),
               Or(Not(C == L2), D + -1*B <= 0, B <= 0),
               Or(Not(C == L1),
                  -1*B + D <= -1,
                  -1*D + B <= -1,
                  Not(A == L1)),
               Or(Not(A == L0) == (C == L0),
                  -1*D + B <= -1,
                  D + -1*B <= -1,
                  Not(A == L1)),
               Or((A == L1) == Not(C == L0),
                  D >= 1,
                  Not(is_L0(A))),
               Or(D >= 1, B >= 1, (L1 == C) == Not(A == L0)),
               D >= 0,
               B >= 0,
               Or(Not(L1 == C), B <= -1, D >= 1),
               Or(Not(is_L1(A)), B >= 1),
               Or(Not(is_L2(C)), D >= 1),
               Or(Not(A == L2),
                  Not(C == L1),
                  -1*D + B <= -1,
                  D + -1*B <= -1),
               Or(Not(A == L2), B >= 1, D <= 0),
               Or(Not(is_L2(A)), Not(C == L2)),
               Or(Not(C == L2),
                  -1*B + D <= -1,
                  Not(A == L1)),
               Or(Not(A == L2),
                  -1*D + B <= 0,
                  D <= 0,
                  Not(C == L1)))),
    ForAll([A, B, C, D, E, F, G, H],
           step(A, B, C, D, E, F, G, H) ==
           And(Or(-1*H + B <= -1,
                  (L0 == E) == Not(A == L0),
                  Not(L0 == C),
                  (L2 == G) == Not(L2 == E)),
               Or(Not(L0 == C), Not(L2 == G)),
               Or(-1*F + B <= 0, Not(C == L1), Not(L2 == G)),
               Or(Not(L2 == G), -1*H + D <= 0),
               Or(-1*H + D <= 0, -1*H + B <= -1, F >= 0),
               Or(F <= 0,
                  -1*H + B <= -1,
                  (E == L2) == Not(G == L2),
                  Not(L1 == G),
                  (G == L0) == Not(A == L0)),
               Or(-1*H + D <= 0, Not(L1 == C)),
               Or(Not(L0 == C),
                  -1*H + B <= -1,
                  Not(L2 == A),
                  F <= 0),
               Or(Not(Or(Not(Or(D + -1*B <= 0,
                                Not(Or(Not(B >= 0),
                                       Not(B <= 0))))),
                         D + -1*B <= 0)),
                  Not(C == L1),
                  D + -1*B <= 0,
                  Not(L2 == G)),
               Or(-1*H + D <= 0, (L2 == G) == Not(E == A)),
               Or(Not(L1 == C),
                  -1*D + F <= 1,
                  F <= 0,
                  (L2 == E) == Not(C == L2),
                  (L2 == E) == Not(G == L2)),
               Or(Not(C == L2), Not(L1 == G)),
               Or((C == L2) == Not(E == L0),
                  -1*H + B <= -1,
                  (L2 == G) == Not(A == L1),
                  Not(L0 == C),
                  (L2 == G) == Not(E == L1)),
               Or(Not(A == L2),
                  F >= 0,
                  (E == A) == Not(A == L0)),
               Or(H + -1*D <= 0, F + -1*B <= 0),
               Or(Not(L2 == E), F + -1*B <= 0),
               Or(Not(L0 == A), Not(L2 == E)),
               Or((C == L2) == Not(E == A),
                  (C == L2) == Not(G == C)),
               Or(H + -1*D <= 0, Not(L2 == G)),
               Or(H + -1*D <= 0, Not(A == L1), Not(L2 == E)),
               Or(Not(L2 == E), -1*F + B <= 0),
               Or(Not(C == L2),
                  -1*D + B <= 0,
                  Not(L2 == E),
                  H >= 0),
               Or(Not(C == L2),
                  -1*D + B <= 0,
                  Not(L2 == E),
                  H <= 0),
               Or((C == L2) == Not(G == C),
                  D + -1*F <= -1,
                  Not(L0 == A),
                  Not(C == L2)),
               Or((E == A) == Not(E == L0),
                  H + -1*D <= 0,
                  Not(L1 == E)),
               Or(F + -1*B <= 0,
                  D + -1*F <= -1,
                  Not(L1 == E)),
               Or(Not(L0 == A),
                  D + -1*F <= -1,
                  Not(L1 == E)),
               Or(-1*F + B <= 0, D + -1*F <= -1, H >= 0),
               Or(-1*F + B <= 0, Not(L1 == A)),
               Or(Not(L0 == C),
                  Not(L0 == E),
                  -1*H + B <= -1,
                  (L2 == E) == Not(A == L2)),
               Or(H + -1*D <= 0, -1*F + B <= 0),
               Or(H <= 0,
                  Not(A == L1),
                  -1*D + B <= 0,
                  Not(L2 == E)),
               Or(H >= 0, -1*H + B <= -1, -1*H + D <= 0),
               Or(H >= 0,
                  Not(L1 == G),
                  -1*D + B <= 0,
                  Not(L2 == E),
                  -1*H + B <= -1),
               Or((L2 == E) == Not(G == C), F + -1*B <= 0),
               Or(Not(is_L1(E)),
                  -1*D + F <= 1,
                  Not(is_L2(G)),
                  Not(is_L2(C))),
               Or(Not(L1 == E),
                  D + -1*F <= -1,
                  -1*F + B <= 0),
               Or(-1*H + D <= 0,
                  -1*H + B <= -1,
                  Not(L1 == G)),
               Or(-1*F + B <= 0, F >= 0, H <= 0))))
done
